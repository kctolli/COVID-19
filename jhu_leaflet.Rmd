---
title: "JHU Leaflets"
subtitle: "US"
---

```{r setup, include=FALSE}
package::libraries()

wdset("D:/COVID-project/")

states <- states() 
county <- county()
ny_county <- newyork(county)

pop <- my_read("./read-data/USA/population_2018.csv") %>% 
  rename(state = State) %>% rename(pop = Population)

us_state <- my_read("./read-data/JHU/JHU_us_state.csv") 

state_us <- inner_join(inner_join(us_state, pop), states, by = ("state_name" = "state"))

pal <- colorNumeric("viridis", NULL) 

us <- leaflet_manip(state_us) 
```

## Cases and Deaths

```{r leafleta}
leaflet(data = us) %>% addTiles() %>% 
  addPolygons(color = ~pal(cases), fillOpacity = 1, stroke = FALSE, group = "cases") %>%
  addPolygons(color = ~pal(deaths),fillOpacity = 1, stroke = FALSE, group = "deaths") %>%
  addLayersControl(overlayGroups = c("cases", "deaths"))
```

## Percent of Population

```{r leafletb}
leaflet(data = us) %>% addTiles() %>% 
  addPolygons(fillColor = ~pal(per_cases), fillOpacity = 1, stroke = FALSE, group = "case %") %>%
  addPolygons(fillColor = ~pal(per_deaths), fillOpacity = 1, stroke = FALSE, group = "death %") %>%
  addLayersControl(overlayGroups = c("case %", "death %"))
```


<br /><br />

```{r update}
update()
```
---
title: "COVID-19"
subtitle: "Research and Consulting Project"
author: "Kyle Tolliver"
date: "BYUI - ECEN 490R"
---

```{r setup, include=FALSE}
pacman::p_load(pacman)
p_load(knitr, tidyverse)
p_load(lubridate, sf, USAboundaries, ggrepel, maps, leaflet, dygraphs, data.table, DT)

opts_chunk$set(echo = TRUE)
options(scipen = 999)
options(warn = -1) 

yesterday <- Sys.Date() - 1

week <- yesterday - 7

biweek <- yesterday - 14

my_read <- function(df){read_csv(df) %>% unique() %>% na.omit()}

pop <- my_read("./read-data/USA/population_2018.csv")

owid <- my_read("./read-data/OWID/owid_data.csv") 
ecdc <- my_read("./read-data/OWID/owid_ecdc.csv")

us <- my_read("./read-data/nytimes/nytimes_us.csv")
```

```{r function}
my_wrangle <- function(df){
  df %>% summarise(total_cases = sum(total_cases), 
            total_deaths = sum(total_deaths), 
            total_tests = sum(total_tests), 
            new_cases = sum(new_cases),
            new_deaths = sum(new_deaths),
            new_tests = sum(new_tests),
            .groups = "keep")
}
```

```{r wrangling}
continent <- owid %>% 
  group_by(continent, date) %>% 
  my_wrangle()

yesterday_continent <- continent %>% 
  filter(date >= week) 

world <- owid %>% 
  group_by(date) %>% 
  my_wrangle()

yesterday_world <- world %>% 
  filter(date >= week) 

yesterday_us <- us %>% 
  rename(cases = us_cases) %>% 
  rename(deaths = us_deaths) %>% 
  filter(date >= week) 
```

```{r pic, fig.align='center', out.width='50%'}
include_graphics('https://images.newscientist.com/wp-content/uploads/2020/02/11165812/c0481846-wuhan_novel_coronavirus_illustration-spl.jpg')
```

## Current Cases and Deaths in the USA

```{r us}
kable(yesterday_us)
```

## Current Cases and Deaths by Continents

```{r continent}
kable(yesterday_continent)
```

## Current Cases and Deaths for the World

```{r world}
kable(yesterday_world)
```

<br /> <br />

```{r update}
print(paste("Last updated:", 
  format(Sys.Date(), "%b %d %Y")))
```

Â© Copyright Kyle Tolliver, 2020

###### *--- [Licensed](https://github.com/BYUI-COVID/BYUI-COVID.github.io/blob/master/LICENSE) under [GNU General Public License v3.0](./site_libs/LICENSE.txt) *
